name: "JEngine CodeQL Configuration"

# Only analyze JEngine source code, exclude third-party dependencies
paths:
  # JEngine Core package
  - 'UnityProject/Packages/com.jasonxudeveloper.jengine.core'
  # JEngine Util package
  - 'UnityProject/Packages/com.jasonxudeveloper.jengine.util'
  # Hot update code
  - 'UnityProject/Assets/HotUpdate/Code'

paths-ignore:
  # Third-party packages
  - 'UnityProject/Packages/com.code-philosophy.hybridclr'
  - 'UnityProject/Packages/com.focus-creative-games.*'
  - 'UnityProject/Packages/com.tuyoogame.*'
  - 'UnityProject/Packages/com.unity.*'
  - 'UnityProject/Packages/com.cysharp.*'
  # Unity generated files
  - 'UnityProject/Library'
  - 'UnityProject/Temp'
  - 'UnityProject/Logs'
  - 'UnityProject/obj'
  # Build outputs
  - 'UnityProject/Builds'
  - 'UnityProject/ServerData'
  # Test files (optional - remove if you want tests scanned)
  - 'UnityProject/Assets/Tests'
  # Third-party assets
  - 'UnityProject/Assets/Plugins'
  # Samples
  - 'UnityProject/Assets/Samples'

# Query configuration
queries:
  - uses: security-and-quality

# Exclude rules that are intentional design decisions for this project
query-filters:
  # Generic catch clauses are intentional for crash prevention in game framework
  - exclude:
      id: cs/catch-of-all-exceptions
  # Nested if-statements are acceptable code style
  - exclude:
      id: cs/nested-if-statements
  # Complex blocks are acceptable for algorithm implementations
  - exclude:
      id: cs/complex-block
  # Project intentionally avoids LINQ for performance
  - exclude:
      id: cs/linq/missed-where
  # Path.Combine is safe when arguments come from internal APIs, not user input
  - exclude:
      id: cs/path-combine
